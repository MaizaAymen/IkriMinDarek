[dotenv@17.2.2] injecting env (2) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
Executing (default): SELECT 1+1 AS result
Executing (default): CREATE SCHEMA IF NOT EXISTS ikri;
Connected to IKRIMINDAREK database
‚úÖ Schema 'ikri' checked/created
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'ikri' AND table_name = 'utilisateur'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_utilisateur_role' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_utilisateur_gouvernorat' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'utilisateur' AND c.table_schema = 'ikri'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'utilisateur' AND tc.table_catalog = 'IKRIMINDAREK' AND tc.table_schema = 'ikri'
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nom" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nom" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nom" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "prenom" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "prenom" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "prenom" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "email" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "email" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur"  ADD UNIQUE ("email");ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "email" TYPE VARCHAR(255)  ;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "login" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "login" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur"  ADD UNIQUE ("login");ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "login" TYPE VARCHAR(255) ;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "mdp_hash" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "mdp_hash" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "mdp_hash" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "role" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "role" DROP DEFAULT;DO 'BEGIN CREATE TYPE "ikri"."enum_utilisateur_role" AS ENUM(''proprietaire'', ''locataire'', ''agent'', ''admin''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "role" TYPE "ikri"."enum_utilisateur_role" USING ("role"::"ikri"."enum_utilisateur_role");
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "image" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "image" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "image" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "phone" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "phone" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "phone" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "bio" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "bio" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "bio" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "cin" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "cin" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "cin" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "date_naissance" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "date_naissance" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "date_naissance" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "adresse" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "adresse" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "adresse" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "ville" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "ville" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "ville" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "gouvernorat" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "gouvernorat" DROP DEFAULT;DO 'BEGIN CREATE TYPE "ikri"."enum_utilisateur_gouvernorat" AS ENUM(''Tunis'', ''Ariana'', ''Ben Arous'', ''Manouba'', ''Nabeul'', ''Zaghouan'', ''Bizerte'', ''B√©ja'', ''Jendouba'', ''Kef'', ''Siliana'', ''Sousse'', ''Monastir'', ''Mahdia'', ''Sfax'', ''Kairouan'', ''Kasserine'', ''Sidi Bouzid'', ''Gab√®s'', ''M√©denine'', ''Tataouine'', ''Gafsa'', ''Tozeur'', ''Kebili''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "gouvernorat" TYPE "ikri"."enum_utilisateur_gouvernorat" USING ("gouvernorat"::"ikri"."enum_utilisateur_gouvernorat");
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "pays" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "pays" SET DEFAULT 'Tunisie';ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "pays" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nombre_proprietes" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nombre_proprietes" SET DEFAULT 0;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "nombre_proprietes" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "verification_proprietaire" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "verification_proprietaire" SET DEFAULT false;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "verification_proprietaire" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "document_verification" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "document_verification" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "document_verification" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_nom" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_nom" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_nom" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_licence" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_licence" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_licence" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_adresse" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_adresse" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "agence_adresse" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "commission_taux" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "commission_taux" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "commission_taux" TYPE DECIMAL(3,2);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_min" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_min" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_min" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_max" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_max" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "budget_max" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "preferences_location" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "preferences_location" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "preferences_location" TYPE VARCHAR(255)[];
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "type_propriete_prefere" DROP NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "type_propriete_prefere" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "type_propriete_prefere" TYPE VARCHAR(255)[];
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ikri"."utilisateur" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace s WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'utilisateur' AND s.oid = t.relnamespace AND s.nspname = 'ikri' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'ikri' AND table_name = 'properties'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_properties_type_propriete' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_properties_gouvernorat' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_properties_statut_approbation' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'properties' AND c.table_schema = 'ikri'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'properties' AND tc.table_catalog = 'IKRIMINDAREK' AND tc.table_schema = 'ikri'
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "titre" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "titre" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "titre" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "description" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "description" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "description" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "type_propriete" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "type_propriete" DROP DEFAULT;DO 'BEGIN CREATE TYPE "ikri"."enum_properties_type_propriete" AS ENUM(''appartement'', ''villa'', ''studio'', ''duplex'', ''penthouse'', ''maison_traditionnelle'', ''terrain''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."properties" ALTER COLUMN "type_propriete" TYPE "ikri"."enum_properties_type_propriete" USING ("type_propriete"::"ikri"."enum_properties_type_propriete");
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "prix_mensuel" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "prix_mensuel" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "prix_mensuel" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "surface" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "surface" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "surface" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_chambres" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_chambres" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_chambres" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_salles_bain" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_salles_bain" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "nombre_salles_bain" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "meuble" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "meuble" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "meuble" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "adresse" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "adresse" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "adresse" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "ville" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "ville" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "ville" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "gouvernorat" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "gouvernorat" DROP DEFAULT;DO 'BEGIN CREATE TYPE "ikri"."enum_properties_gouvernorat" AS ENUM(''Tunis'', ''Ariana'', ''Ben Arous'', ''Manouba'', ''Nabeul'', ''Zaghouan'', ''Bizerte'', ''B√©ja'', ''Jendouba'', ''Kef'', ''Siliana'', ''Sousse'', ''Monastir'', ''Mahdia'', ''Sfax'', ''Kairouan'', ''Kasserine'', ''Sidi Bouzid'', ''Gab√®s'', ''M√©denine'', ''Tataouine'', ''Gafsa'', ''Tozeur'', ''Kebili''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."properties" ALTER COLUMN "gouvernorat" TYPE "ikri"."enum_properties_gouvernorat" USING ("gouvernorat"::"ikri"."enum_properties_gouvernorat");
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "code_postal" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "code_postal" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "code_postal" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "latitude" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "latitude" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "latitude" TYPE DECIMAL(10,8);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "longitude" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "longitude" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "longitude" TYPE DECIMAL(11,8);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "climatisation" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "climatisation" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "climatisation" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "chauffage" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "chauffage" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "chauffage" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "balcon" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "balcon" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "balcon" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "terrasse" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "terrasse" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "terrasse" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "jardin" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "jardin" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "jardin" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "parking" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "parking" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "parking" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "ascenseur" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "ascenseur" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "ascenseur" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "piscine" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "piscine" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "piscine" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "internet" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "internet" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "internet" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "securite" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "securite" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "securite" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "etage" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "etage" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "etage" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "total_etages" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "total_etages" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "total_etages" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "annee_construction" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "annee_construction" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "annee_construction" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "images" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "images" SET DEFAULT ARRAY[]::VARCHAR(255)[];ALTER TABLE "ikri"."properties" ALTER COLUMN "images" TYPE VARCHAR(255)[];
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "image_principale" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "image_principale" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "image_principale" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "disponible" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "disponible" SET DEFAULT true;ALTER TABLE "ikri"."properties" ALTER COLUMN "disponible" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "date_disponibilite" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "date_disponibilite" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "date_disponibilite" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "actif" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "actif" SET DEFAULT true;ALTER TABLE "ikri"."properties" ALTER COLUMN "actif" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "verifie" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "verifie" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "verifie" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "regles_location" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "regles_location" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "regles_location" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "animaux_acceptes" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "animaux_acceptes" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "animaux_acceptes" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "fumeurs_acceptes" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "fumeurs_acceptes" SET DEFAULT false;ALTER TABLE "ikri"."properties" ALTER COLUMN "fumeurs_acceptes" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "duree_location_min" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "duree_location_min" SET DEFAULT 1;ALTER TABLE "ikri"."properties" ALTER COLUMN "duree_location_min" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "caution" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "caution" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "caution" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "vues" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "vues" SET DEFAULT 0;ALTER TABLE "ikri"."properties" ALTER COLUMN "vues" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "favoris" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "favoris" SET DEFAULT 0;ALTER TABLE "ikri"."properties" ALTER COLUMN "favoris" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."properties"  ADD FOREIGN KEY ("proprietaire_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "statut_approbation" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "statut_approbation" SET DEFAULT 'en_attente';DO 'BEGIN CREATE TYPE "ikri"."enum_properties_statut_approbation" AS ENUM(''en_attente'', ''approuvee'', ''rejetee''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."properties" ALTER COLUMN "statut_approbation" TYPE "ikri"."enum_properties_statut_approbation" USING ("statut_approbation"::"ikri"."enum_properties_statut_approbation");
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "raison_rejet" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "raison_rejet" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "raison_rejet" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "date_approbation" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "date_approbation" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "date_approbation" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."properties" ALTER COLUMN "admin_approuve_par" DROP NOT NULL;ALTER TABLE "ikri"."properties" ALTER COLUMN "admin_approuve_par" DROP DEFAULT;ALTER TABLE "ikri"."properties" ALTER COLUMN "admin_approuve_par" TYPE INTEGER;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace s WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'properties' AND s.oid = t.relnamespace AND s.nspname = 'ikri' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'ikri' AND table_name = 'bookings'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_bookings_statut' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'ikri' AND t.typname='enum_bookings_methode_paiement' GROUP BY 1
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'bookings' AND c.table_schema = 'ikri'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'bookings' AND tc.table_catalog = 'IKRIMINDAREK' AND tc.table_schema = 'ikri'
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_debut" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_debut" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_debut" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_fin" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_fin" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_fin" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "duree_mois" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "duree_mois" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "duree_mois" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "statut" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "statut" SET DEFAULT 'en_attente';DO 'BEGIN CREATE TYPE "ikri"."enum_bookings_statut" AS ENUM(''en_attente'', ''confirmee'', ''refusee'', ''active'', ''terminee'', ''annulea''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."bookings" ALTER COLUMN "statut" TYPE "ikri"."enum_bookings_statut" USING ("statut"::"ikri"."enum_bookings_statut");
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_mensuel" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_mensuel" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_mensuel" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_total" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_total" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "prix_total" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "caution_payee" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "caution_payee" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "caution_payee" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "commission_agent" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commission_agent" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commission_agent" TYPE DECIMAL(10,2);
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "message_locataire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "message_locataire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "message_locataire" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "reponse_proprietaire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "reponse_proprietaire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "reponse_proprietaire" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_signe" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_signe" SET DEFAULT false;ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_signe" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_url" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_url" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "contrat_url" TYPE VARCHAR(255);
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_proprietaire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_proprietaire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_proprietaire" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_locataire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_locataire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "note_locataire" TYPE INTEGER;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_proprietaire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_proprietaire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_proprietaire" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_locataire" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_locataire" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "commentaire_locataire" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_confirmation" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_confirmation" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_confirmation" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_signature_contrat" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_signature_contrat" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_signature_contrat" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_paiement_caution" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_paiement_caution" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "date_paiement_caution" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "methode_paiement" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "methode_paiement" DROP DEFAULT;DO 'BEGIN CREATE TYPE "ikri"."enum_bookings_methode_paiement" AS ENUM(''especes'', ''virement'', ''cheque'', ''carte_bancaire''); EXCEPTION WHEN duplicate_object THEN null; END';ALTER TABLE "ikri"."bookings" ALTER COLUMN "methode_paiement" TYPE "ikri"."enum_bookings_methode_paiement" USING ("methode_paiement"::"ikri"."enum_bookings_methode_paiement");
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "paiement_confirme" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "paiement_confirme" SET DEFAULT false;ALTER TABLE "ikri"."bookings" ALTER COLUMN "paiement_confirme" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "conditions_particulieres" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "conditions_particulieres" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "conditions_particulieres" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "frais_supplementaires" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "frais_supplementaires" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "frais_supplementaires" TYPE JSON;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "updatedAt" SET NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "updatedAt" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "updatedAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."bookings"  ADD FOREIGN KEY ("propriete_id") REFERENCES "ikri"."properties" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."bookings"  ADD FOREIGN KEY ("locataire_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."bookings"  ADD FOREIGN KEY ("agent_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE SET NULL ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."bookings" ALTER COLUMN "motif_refus" DROP NOT NULL;ALTER TABLE "ikri"."bookings" ALTER COLUMN "motif_refus" DROP DEFAULT;ALTER TABLE "ikri"."bookings" ALTER COLUMN "motif_refus" TYPE TEXT;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace s WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'bookings' AND s.oid = t.relnamespace AND s.nspname = 'ikri' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'ikri' AND table_name = 'messages'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'messages' AND c.table_schema = 'ikri'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'messages' AND tc.table_catalog = 'IKRIMINDAREK' AND tc.table_schema = 'ikri'
Executing (default): ALTER TABLE "ikri"."messages" DROP CONSTRAINT "messages_receiver_id_fkey"
Executing (default): ALTER TABLE "ikri"."messages" DROP CONSTRAINT "messages_sender_id_fkey"
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "sender_id" SET NOT NULL;ALTER TABLE "ikri"."messages"  ADD FOREIGN KEY ("sender_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE NO ACTION ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "receiver_id" SET NOT NULL;ALTER TABLE "ikri"."messages"  ADD FOREIGN KEY ("receiver_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE NO ACTION ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "contenu" SET NOT NULL;ALTER TABLE "ikri"."messages" ALTER COLUMN "contenu" DROP DEFAULT;ALTER TABLE "ikri"."messages" ALTER COLUMN "contenu" TYPE TEXT;
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "lu" DROP NOT NULL;ALTER TABLE "ikri"."messages" ALTER COLUMN "lu" SET DEFAULT false;ALTER TABLE "ikri"."messages" ALTER COLUMN "lu" TYPE BOOLEAN;
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "date_lecture" DROP NOT NULL;ALTER TABLE "ikri"."messages" ALTER COLUMN "date_lecture" DROP DEFAULT;ALTER TABLE "ikri"."messages" ALTER COLUMN "date_lecture" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "ikri"."messages" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ikri"."messages" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ikri"."messages" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace s WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'messages' AND s.oid = t.relnamespace AND s.nspname = 'ikri' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'ikri' AND table_name = 'favorites'
Executing (default): SELECT pk.constraint_type as "Constraint",c.column_name as "Field", c.column_default as "Default",c.is_nullable as "Null", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as "Type", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS "special", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS "Comment" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'favorites' AND c.table_schema = 'ikri'
Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'favorites' AND tc.table_catalog = 'IKRIMINDAREK' AND tc.table_schema = 'ikri'
Executing (default): ALTER TABLE "ikri"."favorites" DROP CONSTRAINT "favorites_user_id_fkey"
Executing (default): ALTER TABLE "ikri"."favorites" ALTER COLUMN "user_id" SET NOT NULL;ALTER TABLE "ikri"."favorites"  ADD FOREIGN KEY ("user_id") REFERENCES "ikri"."utilisateur" ("id") ON DELETE NO ACTION ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."favorites" DROP CONSTRAINT "favorites_property_id_fkey"
Executing (default): ALTER TABLE "ikri"."favorites" ALTER COLUMN "property_id" SET NOT NULL;ALTER TABLE "ikri"."favorites"  ADD FOREIGN KEY ("property_id") REFERENCES "ikri"."properties" ("id") ON DELETE NO ACTION ON UPDATE CASCADE;
Executing (default): ALTER TABLE "ikri"."favorites" ALTER COLUMN "createdAt" SET NOT NULL;ALTER TABLE "ikri"."favorites" ALTER COLUMN "createdAt" DROP DEFAULT;ALTER TABLE "ikri"."favorites" ALTER COLUMN "createdAt" TYPE TIMESTAMP WITH TIME ZONE;
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a, pg_namespace s WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'favorites' AND s.oid = t.relnamespace AND s.nspname = 'ikri' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
‚úÖ Models synced with DB
üè† House Rental Tunisia API
‚ö° Socket.IO initialized for real-time chat
üöÄ Server running on port 4000
üìç API available at http://0.0.0.0:4000/api
   Or use your machine IP, e.g., http://26.71.37.69:4000/api
üí¨ Real-time chat enabled

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üè† PROPERTY CREATION REQUEST RECEIVED  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
[Body] Fields received: { titre: '‚úÖ', prix_mensuel: '‚úÖ', adresse: '‚úÖ', proprietaire_id: '‚úÖ' }
[Files] Multer upload info:
  - req.files exists: true
  - req.files is array: true
  - Number of files: 1
[Files] Detailed info:
  üì∑ File 1:
     - filename: property-1764771727077-616401759.png
     - size: 8 bytes
     - mimetype: image/png
     - path: C:\Users\aymen\Desktop\e-commerce\IkriMinDarek\uploads\property-1764771727077-616401759.png
Executing (default): INSERT INTO "ikri"."properties" ("id","titre","description","type_propriete","prix_mensuel","surface","nombre_chambres","nombre_salles_bain","meuble","adresse","ville","gouvernorat","code_postal","latitude","longitude","climatisation","chauffage","balcon","terrasse","jardin","parking","ascenseur","piscine","internet","securite","images","image_principale","disponible","actif","verifie","statut_approbation","animaux_acceptes","fumeurs_acceptes","duree_location_min","vues","favoris","createdAt","updatedAt","proprietaire_id") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$20,$21,$22,$23,$24,$25,$26,$27,$28,$29,$30,$31,$32,$33,$34,$35,$36,$37,$38) RETURNING "id","titre","description","type_propriete","prix_mensuel","surface","nombre_chambres","nombre_salles_bain","meuble","adresse","ville","gouvernorat","code_postal","latitude","longitude","climatisation","chauffage","balcon","terrasse","jardin","parking","ascenseur","piscine","internet","securite","etage","total_etages","annee_construction","images","image_principale","disponible","date_disponibilite","actif","verifie","statut_approbation","raison_rejet","date_approbation","admin_approuve_par","regles_location","animaux_acceptes","fumeurs_acceptes","duree_location_min","caution","vues","favoris","createdAt","updatedAt","proprietaire_id";
[Property] ‚è≥ New property 20 created with location: {
  id: 20,
  latitude: '36.80650000',
  longitude: '10.18150000',
  adresse: 'Test Address FormData',
  status: 'en_attente',
  imagesCount: 1,
  imagesArray: [ '/uploads/property-1764771727077-616401759.png' ],
  imagePrincipale: '/uploads/property-1764771727077-616401759.png'
}
[Property] ‚è≥ Property awaiting admin approval
[Property] ‚úÖ SUCCESS: Response sent with: {
  id: 20,
  images: [ '/uploads/property-1764771727077-616401759.png' ],
  imageCount: 1
}
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  ‚úÖ PROPERTY CREATION COMPLETED  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù


‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üè† PROPERTY CREATION REQUEST RECEIVED  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
[Body] Fields received: { titre: '‚úÖ', prix_mensuel: '‚úÖ', adresse: '‚úÖ', proprietaire_id: '‚ùå' }
[Files] Multer upload info:
  - req.files exists: true
  - req.files is array: true
  - Number of files: 0
[Files] ‚ö†Ô∏è No files uploaded
Executing (default): SELECT "id", "nom", "prenom", "email", "login", "mdp_hash", "role", "image", "phone", "bio", "cin", "date_naissance", "adresse", "ville", "gouvernorat", "pays", "nombre_proprietes", "verification_proprietaire", "document_verification", "agence_nom", "agence_licence", "agence_adresse", "commission_taux", "budget_min", "budget_max", "preferences_location", "type_propriete_prefere", "createdAt", "updatedAt" FROM "ikri"."utilisateur" AS "User" WHERE "User"."email" = 'maizaaymena@gmail.com';
Message sent: <8d7b34de-b9ca-360b-13d3-838dcd0efda2@gmail.com>

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üè† PROPERTY CREATION REQUEST RECEIVED  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
[Body] Fields received: { titre: '‚úÖ', prix_mensuel: '‚úÖ', adresse: '‚úÖ', proprietaire_id: '‚ùå' }
[Files] Multer upload info:
  - req.files exists: true
  - req.files is array: true
  - Number of files: 0
[Files] ‚ö†Ô∏è No files uploaded

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üè† PROPERTY CREATION REQUEST RECEIVED  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
[Body] Fields received: { titre: '‚úÖ', prix_mensuel: '‚úÖ', adresse: '‚úÖ', proprietaire_id: '‚ùå' }
[Files] Multer upload info:
  - req.files exists: true
  - req.files is array: true
  - Number of files: 0
[Files] ‚ö†Ô∏è No files uploaded
